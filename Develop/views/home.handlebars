{{#if logged_in}}
  <h2>Welcome, {{username}}!</h2>
  <button id="logout">Logout</button>
{{else}}
  <a href="/login">Login</a>
  <a href="/signup">Sign Up</a>
{{/if}}

<h1>All Posts</h1>
{{#each posts}}
  <div class="post">
    <h2>{{this.title}}</h2>
    <p>{{this.content}}</p>
    <p>By {{this.user.username}}</p>
  </div>
{{/each}}

<script>
  document.getElementById('logout').addEventListener('click', async () => {
    const response = await fetch('/api/users/logout', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' }
    });

    if (response.ok) {
      document.location.replace('/');
    } else {
      alert('Failed to log out');
    }
  });
</script>

<script>
  document.getElementById('logout').addEventListener('click', async () => {
    const response = await fetch('/api/users/logout', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' }
    });

    if (response.ok) {
      document.location.replace('/');
    } else {
      alert('Failed to log out');
    }
  });
</script>
